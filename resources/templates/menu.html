<!DOCTYPE html>
<html lang="es" xmls:th="http://www.thymeLeaf.org">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Menú</title>

	<link th:href="@{/general.css}" rel="stylesheet">
	<link href="https://unpkg.com/ionicons@4.5.10-0/dist/css/ionicons.min.css" rel="stylesheet">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://cdn.datatables.net/1.13.7/css/dataTables.bootstrap5.min.css">
	<link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.5.0/css/responsive.bootstrap5.min.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
</head>
<body>
	<div id="sidebar">
	    <div id="header">
			<div class=" p-1 d-flex align-items-center justify-content-center">
		        <a class="text-decoration-none text-white fs-4 d-none d-sm-inline btn btn-outline-warning">SASTRERÍA JG</a>
		    </div>
	    </div>
		<ul class="nav nav-pills flex-column mt-3">
	        <li class="nav-item py-2 py-sm-2">
	            <a th:href="@{/menu}" class="nav-link text-white active_custom">
	                <i class="fs-5 fas fa-home mr-2"></i><span class="fs-5 ms-3 d-none d-sm-inline">Inicio</span>
	            </a>
	        </li>
	        <li class="nav-item py-2 py-sm-2">
	            <a th:href="@{/empleado}" class="nav-link text-white ">
	                <i class="fs-5 fas fa-user-tie"></i><span class="fs-5 ms-3 d-none d-sm-inline">Empleado</span>
	            </a>
	        </li>
	        <li class="nav-item py-2 py-sm-2">
	            <a th:href="@{/proveedor}" class="nav-link text-white">
	                <i class="fs-5 fa fa-truck"></i><span class="fs-5 ms-3 d-none d-sm-inline">Proveedor</span>
	            </a>
	        </li>
	        <li class="nav-item py-2 py-sm-2">
	            <a th:href="@{/cliente}" class="nav-link text-white">
	                <i class="fs-5 fa fa-solid fa-users"></i><span class="fs-5 ms-3 d-none d-sm-inline">Cliente</span>
	            </a>
	        </li>
	        <li class="nav-item py-2 py-sm-2">
	            <a th:href="@{/producto}" class="nav-link text-white">
	                <i class="fs-5 fa fa-box"></i><span class="fs-5 ms-3 d-none d-sm-inline">Producto</span>
	            </a>
	        </li>
	        <li class="nav-item py-2 py-sm-2">
	            <a th:href="@{/venta}" class="nav-link text-white">
	                <i class="fs-5 fa fa-tshirt"></i><span class="fs-5 ms-3 d-none d-sm-inline">Venta</span>
	            </a>
	        </li>
	        <li class="nav-item py-2 py-sm-2">
	            <a th:href="@{/alquiler}" class="nav-link text-white">
	                <i class="fs-5 fa fa-stopwatch"></i><span class="fs-5 ms-3 d-none d-sm-inline">Alquiler</span>
	            </a>
	        </li>
	        <li class="nav-item py-2 py-sm-2">
	            <a th:href="@{/pedido}" class="nav-link text-white">
	                <i class="fs-5 fa fa-pencil-ruler"></i><span class="fs-5 ms-3 d-none d-sm-inline">Pedido</span>
	            </a>
	        </li>
	        <li class="nav-item py-2 py-sm-2">
	            <a th:href="@{/recibo}" class="nav-link text-white">
	                <i class="fs-5 fa fa-file-invoice-dollar"></i><span class="fs-5 ms-3 d-none d-sm-inline">Recibo</span>
	            </a>
	        </li>
	        <li class="nav-item py-2 py-sm-2 barra-abajo">
	            <a th:href="@{/logout}" class="nav-link text-white">
	                <i class="fs-5 fa fa-door-open"></i><span class="fs-5 ms-3 d-none d-sm-inline">Logout</span>
	            </a>
	        </li> 
	    </ul>
	</div>
	
	<div id="cuadrado">
		<div id="content">
			<div class="container m-1 d-flex justify-content-between align-items-center mb-4">
			    <h1 class="m-0">Menu Principal</h1>
			</div>
			
			<table>
				<tbody>
					<tr th:each="pro:${listaProductos}">
						<td th:text="${pro.nombreProducto}"></td>
					</tr>
				</tbody>
			</table>
			
			<div class="card-group">
				<div class="card">
					<div class="card-header bg-transparent">
						Recibos generados en la semana
					</div>
					<canvas id="graficoProgresoSemanal"></canvas>
					
				</div>
				<div class="card">
					<div class="card-header bg-transparent">
						Stock de los Productos
					</div>
					<canvas id="graficoStockProductos"  style="max-height: 360px;"></canvas>
				</div>
			</div>
			
			<br>
			
			<div class="card-group">
				<div class="card">
					<div class="card-header bg-transparent">
						Ventas por Empleado en la semana
					</div>
					<div class="card-body">
						<canvas id="graficoVentasPorEmpleado"></canvas>
					</div>
				</div>
				<div class="card">
					<div class="card-header bg-transparent">
						Alquileres por Empleado en la semana
					</div>
					<div class="card-body">
						<canvas id="graficoAlquileresPorEmpleado"></canvas>
					</div>
				</div>
				<div class="card">
					<div class="card-header bg-transparent">
						Pedidos por Empleado en la semana
					</div>
					<div class="card-body">
						<canvas id="graficoPedidosPorEmpleado"></canvas>
					</div>
				</div>
			</div>
		</div>
	</div>
	<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
	
	<script th:inline="javascript">
	    // Obtiene los datos proporcionados por el controlador
	    

	    
	    var nombresEmpleados = /*[[${nombresEmpleadosVentas}]]*/ [];
    	var cantidadVentas = /*[[${cantidadVentas}]]*/ [];
	
	    // Configuración y generación del gráfico con Chart.js
	    var ctx = document.getElementById('graficoVentasPorEmpleado').getContext('2d');
	    var myChart = new Chart(ctx, {
	        type: 'bar',
	        data: {
	            labels: nombresEmpleados,
	            datasets: [{
	                label: 'Cantidad de Ventas por Empleado',
	                data: cantidadVentas,
	                backgroundColor: '#003f5c', // Color de fondo para las barras
	            }]
	        },
	        options: {
	            scales: {
	                y: {
	                    beginAtZero: true
	                    
	                }
	            }
	        }
	    });
	</script>
	<script th:inline="javascript">
	    // Obtiene los datos proporcionados por el controlador
	    var nombresEmpleados = /*[[${nombresEmpleadosAlquileres}]]*/ [];
    	var cantidadAlquileres = /*[[${cantidadAlquileres}]]*/ [];
	
	    // Configuración y generación del gráfico con Chart.js
	    var ctx = document.getElementById('graficoAlquileresPorEmpleado').getContext('2d');
	    var myChart = new Chart(ctx, {
	        type: 'bar',
	        data: {
	            labels: nombresEmpleados,
	            datasets: [{
	                label: 'Cantidad de Alquileres por Empleado',
	                data: cantidadAlquileres,
	                backgroundColor: '#ff6361', // Color de fondo para las barras
	            }]
	        },
	        options: {
	            scales: {
	                y: {
	                    beginAtZero: true
	                    
	                }
	            }
	        }
	    });
	</script>
	<script th:inline="javascript">
	    // Obtiene los datos proporcionados por el controlador
	    var nombresEmpleados = /*[[${nombresEmpleadosPedidos}]]*/ [];
    	var cantidadPedidos = /*[[${cantidadPedidos}]]*/ [];
	
	    // Configuración y generación del gráfico con Chart.js
	    var ctx = document.getElementById('graficoPedidosPorEmpleado').getContext('2d');
	    var myChart = new Chart(ctx, {
	        type: 'bar',
	        data: {
	            labels: nombresEmpleados,
	            datasets: [{
	                label: 'Cantidad de Pedidos por Empleado',
	                data: cantidadPedidos,
	                backgroundColor: '#58508d', // Color de fondo para las barras
	            }]
	        },
	        options: {
	            scales: {
	                y: {
	                    beginAtZero: true
	                    
	                }
	            }
	        }
	    });
	</script>
	<script th:inline="javascript">
	    /* Obtener los datos del modelo proporcionados por el controlador */
	    var cantidadRecibosPorDiaSemana = /*[[${cantidadRecibosPorDiaSemana}]]*/ [];
	
	    // Configurar los datos para el gráfico
	    var ctx = document.getElementById('graficoProgresoSemanal').getContext('2d');
	    var myChart = new Chart(ctx, {
	        type: 'line',
	        data: {
	            labels: ['Domingo', 'Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes', 'Sábado'],
	            datasets: [{
	                label: 'Recibos Generados por Día',
	                data: cantidadRecibosPorDiaSemana,
	                fill: false,
	                borderColor: 'rgba(75, 192, 192, 1)', // Color de la línea del gráfico
	                borderWidth: 2
	            }]
	        },
	        options: {
	            scales: {
	                y: {
	                    beginAtZero: true
	                }
	            }
	        }
	    });
	</script>
	<script th:inline="javascript">
	    /* Obtener los datos del modelo proporcionados por el controlador */
	    var nombresProductos = /*[[${nombresProductos}]]*/ [];
	    var stockProductos = /*[[${stockProductos}]]*/ [];
	
	    // Función para asignar colores según la cantidad de stock
	    function asignarColor(stock) {
	        if (stock <= 5) {
	            return 'rgba(255, 99, 132, 0.7)'; // Rojo
	        } else if (stock >= 6 && stock <= 9) {
	            return 'rgba(255, 206, 86, 0.7)'; // Amarillo
	        } else {
	            return 'rgba(75, 192, 192, 0.7)'; // Verde
	        }
	    }
	
	    // Configurar el gráfico con Chart.js
	    var ctx = document.getElementById('graficoStockProductos').getContext('2d');
	    var myChart = new Chart(ctx, {
	        type: 'doughnut',
	        data: {
	            labels: nombresProductos,
	            datasets: [{
	                label: 'Stock de Productos',
	                data: stockProductos,
	                backgroundColor: stockProductos.map(asignarColor),
	                borderColor: stockProductos.map(stock => stock <= 5 ? 'rgba(255, 99, 132, 1)' : (stock >= 6 && stock <= 9) ? 'rgba(255, 206, 86, 1)' : 'rgba(75, 192, 192, 1)'),
	                borderWidth: 1
	            }]
	        },
	        options: {
	            scales: {
	                x: {
	                    beginAtZero: true
	                }
	            }
	        }
	    });
	</script>
</body>
</html>